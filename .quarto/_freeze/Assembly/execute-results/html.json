{
  "hash": "c1094701e0b4335cc8a2674a135953bc",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Assembly Automation\"\neditor: visual\njupyter: python3\n---\n\n\n\n\nAssembly focuses on the reconstruction of the original sequence by aligning and merging shorter reads.\n\nMapping-based approaches are more frequently used for Nanopore sequencing data owing to the higher base-calling error rate, which renders long-read de novo assembly more challenging compared to Illumina sequencing. However, in cases of high target coverage, contigs can be successfully assembled by merging overlapping reads.\n\n[Diamond](https://github.com/bbuchfink/diamond) and [Canu](https://github.com/marbl/canu) are tools that can be used for contig generation. Using cleaned Nanopore reads as input, our automated pipeline first identifies and annotates viral reads with DIAMOND, followed by contig assembly with Canu and taxonomic classification using BLAST. The pipeline produces a meta.contig.fasta file and a top_hit_per_contig.tsv summary table as final outputs.\n\nPlease note that the DIAMOND database used in this workflow is curated for viruses associated with humans and is therefore less suitable for broad or unbiased virus discovery.\n\n## Preparing to run the workflow\n\nTo run the automated pipeline, you first need to fill out the excel sheet **Assembly_paths.xlsx** within the **Assembly_automation** folder as shown in the example below. Do not change the file name when saving! Here, you tell snakemake which folder your cleaned reads are in. \n![Example](assembly_auto_excel.png)\n\nYou need to be in the right environment:\n\n``` bash\nconda deactivate nanopore_diagnostics\n```\n\n``` bash\nconda activate canu_v2.3\n```\n\nMake sure you are in the right folder.\n\n``` bash\ncd /mnt/viro0002-data/sequencedata/processed/Diagnostics_metagenomics/Metagenomics_automation/Assembly_automation/  \n```\n\nThen just copy in the following command:\n\n``` bash\nsnakemake --cores 16 \n```\n\n::: callout-warning\n## Warning\n\nThis analysis may take some time. Its best to run all the samples together and run overnight.\n:::\n\n::: callout-warning\n## Warning\n\nRemember to update the run paths and barcodes for each sample!\n:::\n\n\n## Output summaries\n\nOnce the analysis is complete, open the newly created **Assembly_results** folder within the **Metagenomics_automation** directory. The two key output files you will need — **top_hit_per_contig.tsv** and **meta.contig.fasta** — are located in the canu subfolder.\n\nThis file contains your top blast hits for each of your generated contigs. \n![Example for File 1: top_hit_per_contig.tsv](assembly_auto_output3.png)\nThe contig names should match the best hits. You can also double check the sequences by blasting on NCBI. These are your generated contigs!\n![Example for File 2: meta.contig.fasta](assembly_auto_output4.png)\n\n::: callout-tip\n## Tip\n\nIf there are no assembly files created, this could mean that no contigs could be generated.\n:::\n\n------------------------------------------------------------------------\n\n",
    "supporting": [
      "Assembly_files"
    ],
    "filters": [],
    "includes": {}
  }
}